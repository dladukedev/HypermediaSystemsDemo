@model ContactListViewModel

@foreach (var contact in Model.Contacts)
{
<tr>
  <td><input type="checkbox" name="selected_contact_ids" value="@contact.Id" x-model="selected"></td>
  <td>@contact.FirstName</td>
  <td>@contact.LastName</td>
  <td>@(contact.FormattedPhone ?? "-")</td>
  <td>@(contact.Email ?? "-")</td>
  <td>
    <div data-overflow-menu>
      <button type="button" aria-haspopup="menu" aria-controls="contact-menu-@contact.Id">
        Options</button>
      <div role="menu" hidden id="contact-menu-@contact.Id">
        <a role="menuitem" href="/Contacts/Edit/@contact.Id">Edit</a>
        <a role="menuitem" href="/Contacts/Details/@contact.Id">View</a>
        <a role="menuitem" href="#" hx-delete="/Contacts/Delete/@contact.Id"
          hx-confirm="Are you sure you want to delete this contact?" hx-target="closest tr" hx-swap="outerHTML swap:1s"
          hx-target="body">Delete</a>
      </div>

  </td>
</tr>
}

@if(Model.Contacts.Count == 10)
{
<tr>
  <td colspan="5" style="text-align: center">
    <span hx-target="closest tr" hx-swap="outerHTML" hx-select="tbody > tr" hx-trigger="revealed"
      hx-get="/contacts?page=@(Model.Page + 1)" hx-include="[name='q']">Loading More...</span>
  </td>
</tr>
}
